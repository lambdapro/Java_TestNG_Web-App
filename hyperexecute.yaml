---
jobLabel: [critical, android, sanity]

version: 0.2
concurrency: 10
runson: linux
appium: true
region: us

tunnel: true
tunnelOpts:
  global: true
#if the application is public then set preOnly: true so that tunnel will be used only to install dependencies

preDirectives:
  commands:
    - mvn -Dmaven.repo.local=./.m2 dependency:resolve -DproxyHost=${LT_PROXY_HOST} -DproxyPort=${LT_PROXY_PORT}

env:
  # PAT: ${{ .secrets.testKey }}
  CACHE_DIR: m2_cache_dir
  LT_USERNAME: ${LT_USERNAME}
  LT_ACCESS_KEY: ${LT_ACCESS_KEY}

cacheKey: '{{ checksum "pom.xml" }}'
cacheDirectories:
  - .m2

framework:
  name: "maven/testng"
  discoveryFlags: ["-Dsuite=android_parallel.xml"]
  discoveryType: xmltest # discoveryType can be class,method and xmltest
  runnerFlags: ["-Dsuite=android_parallel.xml" , "-Dmaven.repo.local=./.m2"]

uploadArtefacts:
  # Will upload your reports from target/site/** to HyperExecute as FinalReport
  - name: FinalReport
    path:
      - target/**